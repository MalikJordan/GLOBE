base_element: n

tracers:
  no3:
    long_name: nitrate
    type: inorganic
    composition:
      n: 4.0                          # mmol N / m^3
    parameters:
      temp_limited: True
      q10: 2.0

  po4:
    long_name: phosphate
    type: inorganic
    composition:
      p: 0.25                         # mmol P / m^3
    parameters:
      temp_limited: False

  phyto1:
    long_name: diatoms
    type: phytoplankton
    composition:                      # element : initial concentration
      n: 2.5                          # mmol N / m^3
      p: 0.15625                      # mmol P / m^3
    parameters:
      nutrient_limitation: minimum    # mininimum, product, or sum of all limiting nutrients
      temp_limited: True
      q10: 2.0

  zoo1:
    long_name: mesozooplankton
    type: zooplankton
    composition:                      # element : initial concentration
      n: 1.5                          # mmol N / m^3
      p: 0.09375                      # mmol P / m^3
    parameters:
      assimilation_efficiency: 0.5
      ingestion_efficiency: 0.25
      grazing_preferences: 
        phyto1: 1.0
      temp_limited: True
      q10: 2.0

  pom1:
    long_name: particulate organic matter
    type: detritus
    composition:                      # element : initial concentration
      n: 0.0                          # mmol N / m^3
      p: 0.0                          # mmol P / m^3

parameters:
  # environment:
  #   base_temp: 20.0
  #   summer_mld: 10.0
  #   winter_mld: 40.0
  #   summer_salt: 36.5
  #   winter_salt: 37.0
  #   summer_sun: 120.0
  #   winter_sun: 10.0
  #   summer_temp: 15.0
  #   winter_temp: 15.0
  #   summer_wind: 10.0
  #   winter_wind: 20.0

  # simulation:
  #   latitude: 45.0
  #   num_days: 365
  #   timestep: 86400.0

  environment:
    base_temp: 10.0
    summer_mld: 10.0
    winter_mld: 40.0
    summer_salt: 36.5
    winter_salt: 37.0
    summer_sun: 120.0
    winter_sun: 10.0
    summer_temp: 30.0
    winter_temp: 10.0
    summer_wind: 10.0
    winter_wind: 20.0

  simulation:
    latitude: 45.0
    num_days: 365
    timestep: 360.0

  water_column:
    column_depth: 10.0
    num_layers: 1

reactions:
  - type: grazing
    consumed: 
      phyto1: [n,p]
    produced: 
      zoo1: [n,p]
    parameters:
      function: ivlev
      max_grazing_rate: 1.0
      ivlev: 0.2

  - type: egestion
    consumed: 
      zoo1: [n,p]
    produced: 
      pom1: [n,p]
    parameters:

  - type: excretion
    consumed: 
      zoo1: [n]
    produced: 
      no3: [n]
    parameters:
      function: grazing

  - type: excretion
    consumed: 
      zoo1: [p]
    produced: 
      po4: [p]
    parameters:
      function: grazing

  - type: mortality
    consumed: 
      phyto1: [n]
    produced: 
      no3: [n]
    parameters:
      mortality_rate: [0.1,0.]

  - type: mortality
    consumed: 
      phyto1: [p]
    produced: 
      po4: [p]
    parameters:
      mortality_rate: [0.1,0.]

  - type: mortality
    consumed: 
      phyto1: [n,p]
    produced: 
      pom1: [n,p]
    parameters:
      mortality_rate: [0.15,0.]

  - type: mortality
    consumed: 
      zoo1: [n]
    produced: 
      no3: [n]
    parameters:
      mortality_rate: [0.05,0.]

  - type: mortality
    consumed: 
      zoo1: [p]
    produced: 
      po4: [p]
    parameters:
      mortality_rate: [0.05,0.]

  - type: uptake
    consumed: 
      no3: [n]
    produced: 
      phyto1: [n]
    parameters:
      nutrient_limitation: variable
      half_sat_nutrient: 1
      light_limitation: 0.25
      # light_limitation: variable
      # light_attenuation_water: 0.0435
      # light_attenuation_phyto: 0.03
      # initial_PI_slope: 0.15
      max_photo_rate: variable
      a: 0.6
      b: 1.066
      c: 1.0

  - type: uptake
    consumed: 
      po4: [p]
    produced: 
      phyto1: [p]
    parameters:
      nutrient_limitation: variable
      half_sat_nutrient: 0.5
      light_limitation: 0.25
      # light_limitation: variable
      # light_attenuation_water: 0.0435
      # light_attenuation_phyto: 0.03
      # initial_PI_slope: 0.15
      max_photo_rate: variable
      a: 0.6
      b: 1.066
      c: 1.0

  - type: remineralization
    consumed: 
      pom1: [n]
    produced: 
      no3: [n]
    parameters:
      remineralization_rate: 0.4

  - type: remineralization
    consumed: 
      pom1: [p]
    produced: 
      po4: [p]
    parameters:
      remineralization_rate: 0.4

